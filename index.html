<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>FluxoPro Brasil | Auditoria Final</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<header>
    <div class="header-content container" style="display:flex; justify-content:space-between;">
        <div id="logo-area"><strong>FluxoPro</strong> Brasil</div>
        <nav>
            <button onclick="switchTab('config')" id="btn-config" class="nav-btn active">Ajustes</button>
            <button onclick="switchTab('list')" id="btn-list" class="nav-btn">Lançamentos</button>
            <button onclick="switchTab('dash')" id="btn-dash" class="nav-btn">Dashboards</button>
        </nav>
    </div>
</header>

<main class="container">
    <section id="tab-list" class="tab-content" style="display:none;">
        <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
            <button onclick="openEntryModal()" class="btn btn-primary">+ Novo Registro</button>
            <button onclick="openExportModal()" class="btn btn-sec">Gerar Relatório Profissional</button>
        </div>
        
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr><th>Data</th><th>Destinação</th><th>Documento</th><th>Categoria</th><th>Valor</th><th>Ações</th></tr>
                </thead>
                <tbody id="lista-corpo"></tbody>
            </table>
        </div>
    </section>

    <section id="tab-dash" class="tab-content" style="display:none;">
        <div class="grid-3">
            <div class="card">
                <h3>Visão Geral</h3>
                <canvas id="chartGeral"></canvas>
            </div>
            <div class="card">
                <h3>Monitor MEI (Fiscal)</h3>
                <div id="mei-alert"></div>
                <canvas id="chartMei"></canvas>
            </div>
            <div class="card">
                <h3>Análise de Despesas</h3>
                <canvas id="chartDespesas"></canvas>
            </div>
        </div>
    </section>
</main>

<div id="modal-export" class="modal">
    <div class="modal-content">
        <h3>Configurar Exportação</h3>
        <label>Período:</label>
        <input type="month" id="exp-periodo">
        <label>Incluir:</label>
        <select id="exp-filtro">
            <option value="todos">Tudo (Pessoal + Empresa)</option>
            <option value="Pessoal">Apenas Pessoal</option>
            <option value="Empresa">Apenas Empresarial (MEI)</option>
        </select>
        <div style="margin-top:20px; display:flex; gap:10px;">
            <button onclick="processExport('pdf')" class="btn btn-primary">Baixar PDF</button>
            <button onclick="processExport('excel')" class="btn btn-sec">Baixar Excel</button>
            <button onclick="closeModal('modal-export')" class="btn">Cancelar</button>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
<script src="app.js"></script>
</body>
</html>
